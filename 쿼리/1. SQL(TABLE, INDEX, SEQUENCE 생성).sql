--DROP TABLE TB_USER;
--DROP TABLE TB_ORD;
--DROP SEQUENCE MAN.ORDER_SEQ;
--DROP TABLE TB_CUST;
--DROP SEQUENCE MAN.CUST_SEQ;
--DROP TABLE TB_ITEM;
--DROP TABLE TB_CD_MST;
----------------------------------------------------
/*유저 테이블 생성*/
CREATE TABLE TB_USER(
	LOGIN_ID VARCHAR2(20) PRIMARY KEY,
	PWD VARCHAR2(20),
	NAME VARCHAR2(20),
	PHONE NUMBER,
	REG_DT DATE,
	UPD_DT DATE
);

COMMENT ON TABLE TB_USER IS '유저정보';
COMMENT ON COLUMN TB_USER.LOGIN_ID IS '사용자 아이디';
COMMENT ON COLUMN TB_USER.PWD IS '패스워드';
COMMENT ON COLUMN TB_USER.NAME IS '이름';
COMMENT ON COLUMN TB_USER.PHONE IS '휴대폰 번호';
COMMENT ON COLUMN TB_USER.REG_DT IS '등록일자';
COMMENT ON COLUMN TB_USER.UPD_DT IS '변경일자';

--SELECT * FROM TB_USER;
-----------------------------------------------------
/*주문 테이블 생성*/
CREATE TABLE TB_ORD(
	ORD_NO VARCHAR2(20) PRIMARY KEY,
	ITEM_CD VARCHAR2(10),
	CUST_CD VARCHAR2(20),
	ORD_STAT_CD VARCHAR2(1),
	REG_DT  DATE,
	UPD_DT  DATE
);

/* 시퀀스 생성 */
CREATE SEQUENCE MAN.ORDER_SEQ
       INCREMENT BY 1
       START WITH 1
       MINVALUE 1
       MAXVALUE 9999
       CYCLE
       NOCACHE
       NOORDER;

--SELECT ORDER_SEQ.NEXTVAL FROM DUAL; -- 시퀀스 값을 증가시킴
--SELECT ORDER_SEQ.CURRVAL FROM DUAL; -- 현재 시퀀스 갓 조회

COMMENT ON TABLE TB_ORD IS '주문정보';
COMMENT ON COLUMN TB_ORD.ORD_NO IS '주문번호';
COMMENT ON COLUMN TB_ORD.ITEM_CD IS '상품코드';
COMMENT ON COLUMN TB_ORD.CUST_CD IS '고객번호';
COMMENT ON COLUMN TB_ORD.ORD_STAT_CD IS '주문상태';
COMMENT ON COLUMN TB_ORD.REG_DT IS '등록일자';
COMMENT ON COLUMN TB_ORD.UPD_DT IS '변경일자';

INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0001','1','B',SYSDATE,SYSDATE);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0002','2','B',SYSDATE+1,SYSDATE+1);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0003','1','B',SYSDATE+2,SYSDATE+2);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0004','2','D',SYSDATE+3,SYSDATE+3);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0005','2','D',SYSDATE+4,SYSDATE+4);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0001','1','D',SYSDATE+5,SYSDATE+5);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0001','3','D',SYSDATE+6,SYSDATE+6);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0002','3','D',SYSDATE+7,SYSDATE+7);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0002','4','D',SYSDATE+8,SYSDATE+8);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0003','4','D',SYSDATE+9,SYSDATE+9);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0001','5','D',SYSDATE+10,SYSDATE+10);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0003','2','D',SYSDATE+11,SYSDATE+11);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0003','2','D',SYSDATE+12,SYSDATE+12);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0004','4','D',SYSDATE+13,SYSDATE+13);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0004','3','D',SYSDATE+14,SYSDATE+14);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0003','1','D',SYSDATE+15,SYSDATE+15);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0003','4','D',SYSDATE+16,SYSDATE+16);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0005','5','E',SYSDATE+17,SYSDATE+17);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0004','6','E',SYSDATE+18,SYSDATE+18);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0002','7','E',SYSDATE+19,SYSDATE+19);
INSERT INTO TB_ORD(ORD_NO,ITEM_CD,CUST_CD,ORD_STAT_CD,REG_DT,UPD_DT) VALUES('20220711' || LPAD(ORDER_SEQ.NEXTVAL,'4','0'),'A0001','1','E',SYSDATE+20,SYSDATE+20);

/* 인덱스 생성 */
CREATE INDEX ORD_IX01 ON TB_ORD(ITEM_CD);
--SELECT * FROM USER_INDEXES WHERE INDEX_NAME = 'ORD_IX01';

--SELECT * FROM TB_ORD;
-----------------------------------------------------
/*고객 테이블 생성*/
CREATE TABLE TB_CUST(
	CUST_CD VARCHAR2(20) PRIMARY KEY,
	CUST_GBCD VARCHAR2(1),
	CUST_NM VARCHAR2(20),
	PHONE   VARCHAR2(13),
	BIRTHBISNO   VARCHAR2(12),
	ADDR    VARCHAR2(100),
	REG_DT  DATE,
	UPD_DT  DATE
);

/* 시퀀스 생성 */
CREATE SEQUENCE MAN.CUST_SEQ
       INCREMENT BY 1
       START WITH 1
       MINVALUE 1
       MAXVALUE 999999
       CYCLE
       NOCACHE
       NOORDER;
--SELECT CUST_SEQ.NEXTVAL FROM DUAL; -- 시퀀스 값을 증가시킴
--SELECT CUST_SEQ.CURRVAL FROM DUAL; -- 현재 시퀀스 갓 조회


COMMENT ON TABLE TB_CUST IS '고객정보';
COMMENT ON COLUMN TB_CUST.CUST_CD IS '고객번호';
COMMENT ON COLUMN TB_CUST.CUST_GBCD IS '고객구분코드';
COMMENT ON COLUMN TB_CUST.CUST_NM IS '고객명';
COMMENT ON COLUMN TB_CUST.PHONE IS '휴대폰번호';
COMMENT ON COLUMN TB_CUST.BIRTHBISNO IS '생년월일사업자번호';
COMMENT ON COLUMN TB_CUST.ADDR IS '주소';
COMMENT ON COLUMN TB_CUST.REG_DT IS '등록일자';
COMMENT ON COLUMN TB_CUST.UPD_DT IS '변경일자';

INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'C','네이버','03112345678','081-25-11111','서울시 강남구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'C','카카오','03111111222','082-25-22222','서울시 서초구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'C','삼성전자','0230199999','083-26-33333','서울시 송파구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'C','현대차','01012345678','084-26-4444','서울시 성동구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'P','부길동','01012345677','19101010','서울시 광진구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'P','김감찬','01012341234','10000101','서울시 강동구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'P','박지문덕','01098765432','3100101','서울시 중랑구',SYSDATE,SYSDATE);
INSERT INTO TB_CUST(CUST_CD,CUST_GBCD,CUST_NM,PHONE,BIRTHBISNO,ADDR,REG_DT,UPD_DT) VALUES(CUST_SEQ.NEXTVAL,'P','홍순신','01077777777','14100101','서울시 동대문구',SYSDATE,SYSDATE);


--SELECT * FROM TB_CUST;
-----------------------------------------------------
/*상품 테이블 생성*/
CREATE TABLE TB_ITEM(
	ITEM_CD VARCHAR2(10) PRIMARY KEY,
	ITEM_NM VARCHAR2(20),
	REG_DT  DATE,
	UPD_DT  DATE
);

COMMENT ON TABLE TB_ITEM IS '상품정보';
COMMENT ON COLUMN TB_ITEM.ITEM_CD IS '상품코드';
COMMENT ON COLUMN TB_ITEM.ITEM_NM IS '상품명';
COMMENT ON COLUMN TB_ITEM.REG_DT IS '등록일자';
COMMENT ON COLUMN TB_ITEM.UPD_DT IS '변경일자';

INSERT INTO TB_ITEM(ITEM_CD, ITEM_NM, REG_DT, UPD_DT) VALUES('A0001', '테슬라 모델X', SYSDATE, SYSDATE);
INSERT INTO TB_ITEM(ITEM_CD, ITEM_NM, REG_DT, UPD_DT) VALUES('A0002', '현대 아이오닉6', SYSDATE, SYSDATE);
INSERT INTO TB_ITEM(ITEM_CD, ITEM_NM, REG_DT, UPD_DT) VALUES('A0003', '엘지 그램', SYSDATE, SYSDATE);
INSERT INTO TB_ITEM(ITEM_CD, ITEM_NM, REG_DT, UPD_DT) VALUES('A0004', '삼성 갤럭시', SYSDATE, SYSDATE);
INSERT INTO TB_ITEM(ITEM_CD, ITEM_NM, REG_DT, UPD_DT) VALUES('A0005', '애플 아이폰', SYSDATE, SYSDATE);

--SELECT * FROM TB_ITEM;
-----------------------------------------------------
/*공통 코드 테이블 생성*/
CREATE TABLE TB_CD_MST(
	CD_VAL  VARCHAR2(3),
    CD_NM   VARCHAR2(20),
    CD_VAL1 VARCHAR2(2), 
    CD_NM1  VARCHAR2(20),
	REG_DT  DATE,
	UPD_DT  DATE,
	CONSTRAINT CD_MST_PK PRIMARY KEY(CD_VAL, CD_VAL1)
);

COMMENT ON TABLE TB_CD_MST IS '코드마스터';
COMMENT ON COLUMN TB_CD_MST.CD_VAL IS '공통코드';
COMMENT ON COLUMN TB_CD_MST.CD_NM IS '공통코드명';
COMMENT ON COLUMN TB_CD_MST.CD_VAL1 IS '상세코드';
COMMENT ON COLUMN TB_CD_MST.CD_NM1 IS '상세코드명';
COMMENT ON COLUMN TB_CD_MST.REG_DT IS '등록일자';
COMMENT ON COLUMN TB_CD_MST.UPD_DT IS '변경일자';

INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('001','주문상태','A','주문대기',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('001','주문상태','B','주문접수',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('001','주문상태','C','주문취소',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('001','주문상태','D','설치완료',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('001','주문상태','E','설치취소',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('002','고객구분','P','개인',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('002','고객구분','C','법인',SYSDATE,SYSDATE);
INSERT INTO TB_CD_MST(CD_VAL, CD_NM, CD_VAL1, CD_NM1, REG_DT, UPD_DT) VALUES('002','고객구분','R','임직원',SYSDATE,SYSDATE);
COMMIT;
--SELECT * FROM TB_CD_MST;